@page "/"
@using System.ComponentModel.DataAnnotations;

<PageTitle>Index</PageTitle>
<section>
    <h1>Home</h1>

    <DropdownButton OnSelectCallback="async (value) => SelectedValue = value" class="mydropdown">
        <ButtonContent>Click Me!</ButtonContent>
        <ChildContent>
            <DropdownItem Value="1">Item 1</DropdownItem>
            <DropdownItem Value="2">Item 2</DropdownItem>
            <DropdownItem Value="3">Item 3</DropdownItem>
        </ChildContent>
    </DropdownButton>

    <DropdownButton OnSelectCallback="async (value) => SelectedValue = value" class="mydropdown2">
        <ButtonContent>
            <div class="holder">
                <svg viewBox="0 0 448 512">
                    <use xlink:href="icons/solid.svg#user" />
                </svg>
                User
            </div>
        </ButtonContent>
        <ChildContent>
            <DropdownItem Value="1">
                <div class="holder">
                    <svg viewBox="0 0 448 512" fill="red">
                        <use xlink:href="icons/solid.svg#user" />
                    </svg>
                    User
                </div>
            </DropdownItem>
            <DropdownItem Value="2">
                <div class="holder">
                    <svg viewBox="0 0 448 512" fill="green">
                        <use xlink:href="icons/solid.svg#user" />
                    </svg>
                    User
                </div>
            </DropdownItem>
            <DropdownItem Value="3">
                <div class="holder">
                    <svg viewBox="0 0 448 512">
                        <use xlink:href="icons/solid.svg#user" />
                    </svg>
                    User
                </div>
            </DropdownItem>
        </ChildContent>
    </DropdownButton>

    <p>SelectedValue: @SelectedValue</p>
    @* <div style="display:flex">
    <MenuButton Items="@items" OnSelectCallback="(val) => selectedItem = val">
    Actions
    </MenuButton>


    </div> *@
    @* OnItemSelected="(i) => selectedItem = items[i]"> *@
     <SelectOnlyCombobox Items="@items" Label="Select Fruit" LabelHidden=false
    @bind-SelectedValue="SelectedValue">
    </SelectOnlyCombobox>
    
    <p>SelectedValue: @Model.SelectedValue</p>

    <EditFormTemplate Model="@Model" ApiUrl="">
        <DataAnnotationsValidator />

        <div class="form-section">
            <InputSelectOnlyCombobox Options="@items" LabelText="A label" @bind-Value="Model.SelectedValue" />
            <ValidationMessage For="@(() => Model.SelectedValue)" />

            <label for="name">Name</label>
            <InputText id="name" @bind-Value="Model.Name" />
            <ValidationMessage For="@(() => Model.Name)" />
        </div>
    </EditFormTemplate>
    
    <select id="status" class="valid" _bl_32="">
        <!--!-->
        <option value="">Select</option>
        <!--!-->
        <option value="0">Active</option>
        <!--!-->
        <option value="1">Deactivated</option>
    </select>
    <p>Selected item: @selectedItem</p>
    <ol>
        <li><a href="/fetchdata">Fetch</a></li>
        <li><a href="/typography">Typography</a></li>
        <li><a href="/buttons">Buttons</a></li>
        <li><a href="/people/create">Create Person</a></li>
        <li><a href="/people/view/1">Edit Person</a></li>
    </ol>

    <ul>
        <li>
            Companies
            <ul>
                <li><a href="/company/create">Create</a></li>
                <li><a href="/company/list">List</a></li>
            </ul>
        </li>
    </ul>
</section>

@code {

    int? SelectedValue { get; set; } = null;
    private string selectedItem = string.Empty;

    private SelectOption[] items = new SelectOption[]
    {
        new SelectOption(0, "--Choose a Fruit--"),
        new SelectOption(null, "Apple"),
        new SelectOption(2, "Banana"),
        new SelectOption(3, "Blueberry"),
        new SelectOption(4, "Boysenberry"),
        new SelectOption(5, "Cherry"),
        new SelectOption(6, "Cranberry"),
        new SelectOption(7, "Durian"),
        new SelectOption(8, "Eggplant"),
        new SelectOption(9, "Fig"),
        new SelectOption(10, "Grape"),
        new SelectOption(111, "Guava"),
        new SelectOption(122, "Huckleberry")
    };

    public MyModel Model { get; set; } = new();

    public record MyModel : ICopyable<MyModel>
    {
        [Range(1,122)]
        public int? SelectedValue { get; set; } = 0;

        [Required]
        public string Name { get; set; } = "Mark";

        public void CopyFrom(MyModel source)
        {
            SelectedValue = source.SelectedValue;
            Name = source.Name;
        }
    }
}