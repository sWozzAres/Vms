@using System.Diagnostics.CodeAnalysis
@inherits InputBase<int?>

<input type="hidden" @bind="CurrentValue" />
<SelectOnlyCombobox Items="@Options" Label="@LabelText" LabelHidden=false
@bind-SelectedValue="CurrentValue">
</SelectOnlyCombobox>

@code {
    [Parameter]
    public string LabelText { get; set; } = null!;

    [Parameter]
    public SelectOption[] Options { get; set; } = null!;

    [Parameter] public string ParsingErrorMessage { get; set; } = "The {0} field must be a number.";

    //int SelectedValue { get; set; } = 111;

    protected override bool TryParseValueFromString(string? value,
        [MaybeNullWhen(false)] out int? result,
        [NotNullWhen(false)] out string? validationErrorMessage)
    {
        if (BindConverter.TryConvertTo<int?>(value, CultureInfo.InvariantCulture, out result))
        {
            validationErrorMessage = null;
            return true;
        }
        else
        {
            validationErrorMessage = string.Format(CultureInfo.InvariantCulture, ParsingErrorMessage, DisplayName ?? FieldIdentifier.FieldName);
            return false;
        }
    }
}
